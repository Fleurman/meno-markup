var meno=function(){var e,t,n,r={version:"0.9.9"};return X=function(e,t){var n=new XMLHttpRequest;n.onload=function(t){e(this.responseText)},n.open("GET",t,!0),n.send(null)},r.parsed=function(e){var t=e.split(/\r\n|\r|\n/);return parse(t)},I=function(e,t){e.innerHTML=t},P=function(e){for(var t={},n={id:0,iB:!1,iR:!1,ls:0,ct:[],bD:0};void 0!==e[n.id];){var r,i,a=e[n.id].trim();if(1==n.iR)"><"==a?(n.bD++,n.iR=!1):t[n.bD].v+=a;else if(1==n.iB){if(r=/^(.*)(\]?)/.exec(a)){var c="]"==r[1][r[1].length-1],l=r[1].replace(/\]$/m,"");t[n.bD].v+=" \n"+l,c&&(n.bD++,n.iB=!1)}}else{if(r=/^(:{1,6})(\[)? (.+)/.exec(a))i={tp:"hd",py:r[1].length,v:r[3]},r[2]&&(n.iB=!0);else if(r=/^-{3,}([^ -]+)?$/.exec(a))i={tp:"hr"},void 0!=r[1]&&(i.tp="cl",i.v=r[1]);else if(r=/^__(-{2,}|:{2,}|\]{2,})_/.exec(a))i={tp:"cs",rule:rule(r[1][0]),count:r[1].length,tag:"div"},n.ct.push("div");else if(r=/^_(.*):(.*)/.exec(a))i={tp:"attr",n:r[1],v:r[2]};else if(r=/^(<-|->)(.*)\1/.exec(a))i={tp:"mq",v:r[2],dr:"<-"==r[1]?"left":"right"};else if(r=/^<>(.*)<>/.exec(a))i={tp:"nav",v:r[1]};else if(r=/^__([^_ ]+)_(.*)/.exec(a))i={tp:"ct",tag:r[1]},n.ct.push(r[1]),r[2]&&("#"==r[2][0]?i.id=r[2].slice(1,r[2].length):i.classname=r[2]);else if("____"==a&&n.ct.length>0)i={tp:"cct",tag:n.ct.pop()};else if(r=/^<([\w]+?):([^>]+)>/.exec(a))i={tp:"ad",mime:gM(r[1]),src:r[2]};else if(r=/^:(.*?)>(\[??)?(.+)/.exec(a))i={tp:"ds",v:r[3]},is(r[1])&&(i.title=r[1]),r[2]&&(n.iB=!0);else if(r=/^><(.?)$/.exec(a))i={tp:"raw",v:r[1]},is(r[1])&&(n.iR=!0,i.v="");else if(r=/^\[([^\[]*)\[(.+)/g.exec(a))i={tp:"ig",alt:r[1],url:r[2]};else if(r=/^(-+|\]+|\^+) (.+)/.exec(a)){i={tp:"list-item",ls:{"-":"u","]":"o","^":"f"}[r[1][0]],v:r[2],it:r[1].length}}else(r=/^(<|-_-|;)(\[)? (.+)/.exec(a))?(i={tp:tW(r[1]),v:r[3]},r[2]&&(n.iB=!0)):i="-"==a||":"==a?{tp:tW(a)}:(r=/^(.+)/.exec(a))?{tp:"text",v:r[1]}:{tp:""};"blank"!=i.tp&&(t[n.bD-1]&&"text"==i.tp&&t[n.bD-1].tp==i.tp?t[n.bD-1].v+="\n"+i.v:(t[n.bD]=i,0==n.iB&&0==n.iR&&n.bD++))}n.id++}return t},is=function(e){return e.trim().length>1},rule=(e={":":"4px dotted lightgrey","]":"1px solid lightgrey"},function(t){return!!e[t]&&e[t]}),tW=(t={"-":"br",":":"blank","<":"blockquote","-_-":"cm",";":"code"},function(e){return t[e]||e}),gM=(n={mp3:"mpeg",ogg:"ogg"},function(e){return"audio/"+n[e]}),dP=function(e,t,n){return e=(e=e.replace(Reg.w(t),Rep.word.bind(Rep,n))).replace(Reg.b(t),Rep.bloc.bind(Rep,n))},pT=function(e){e=(e=(e=e.replace(/</g,"&lt;")).replace(Reg.l(),Rep.link)).replace(/(?:^| )\[([^\]:]+?):(.+?)\](?: |$|)/gm,Rep.hint);for(var t=["__","sub","\\^\\^","sup","\\^","i","&lt;&lt;","b","&lt;","q",">>","small","_","u","--","del",";;","samp","->","mark"],n=0;n<t.length;n+=2)e=dP(e,t[n],t[n+1]);return e=(e=(e=(e=(e=e.replace(Reg.w(";"),Rep.wcode)).replace(Reg.b(";"),Rep.code)).replace(/(?: |^)\[([^\[]+)\[([^ ]+)(?: |$)/gm,Rep.ii)).replace(Reg.b(">&lt;"),Rep.raw)).replace(/(\200)/g,"<br>"),unescape(e)},pL=function(e){var t=e;return t=t.replace(/(?: |^)\[([^\[]+)\[([^ ]+)(?: |$)/gm,Rep.im)},Reg={w:function(e){return new RegExp("(?: |^)"+e+"([^ \\n\\.\\[]+)(?: |$)","g")},b:function(e){return new RegExp("(?: |^)"+e+"\\[(.+?)\\](?: |$)","g")},l:function(e){return new RegExp("(?: |^)>([^><]+?)(&lt;|>)([^ ;]+);?([^ ]*?)( ||$)","gm")}},Rep={H:function(e,t){return" <"+e+">"+t+"</"+e+"> "},I:function(e,t,n){return' <img alt="'+e+'" src="'+t+'" '+(n?'style="display:inline;"':"")+' title="'+e+'" > '},raw:function(e,t){return t},code:function(e,t){return" <code meno-inblock >"+escape(t)+"</code> "},wcode:function(e,t){return Rep.code(e,Rep.ws(t))},link:function(e,t,n,r,i,a){return " <a href='"+r+"' target='"+(">"==n?"_blank":"_self")+"' "+aI()+(i?'download="'+i+'"':"")+">"+(" "==t?r:pL(t))+"</a> "+a},im:function(e,t,n){return Rep.I(t,n)},ii:function(e,t,n){return Rep.I(t,n,!0)},hint:function(e,t,n){return' <span meno-tip="'+n+'">'+pT(t)+"</span>"},ws:function(e){return e.replace(/(_)/gm," ")},word:function(e,t,n){return Rep.H(e,Rep.ws(n))},bloc:function(e,t,n){return Rep.H(e,n)}},at={},sl={},aL=["class","name","title"],sL=["cursor","color","font","float"],aI=function(){var e="";return e+=aA(),e+=aS()},aA=function(){var e=Object.keys(at);if(e.length<1)return"";var t=" ";for(i in e){var n=at[e[i]];""!=n&&(t+=e[i]+'="'+n+'" ')}return t},aS=function(){var e=Object.keys(sl);if(e.length<1)return"";var t=' style="';for(i in e){var n=sl[e[i]];""!=n&&(t+=e[i]+":"+n+";")}return t+='"'},gT=function(e){for(var t="",n=0;n<e;n++)t+="  ";return t},sH=function(e,t,n){return"<"+e+(n?"":aI())+">"+pT(t)+"</"+e+">\n"},sp=function(e,t){return"-webkit-"+e+":"+t+";-moz-"+e+":"+t+";"+e+":"+t+";"},pH=function(e){var t=0,n={},r=0,i=[],a="";for(t in e){if("list-item"==(n=e[t]).tp)if("f"!=n.ls){if(n.it<r)for(var c=0;c<r-n.it;c++)a+=i.pop();if(n.it>r)for(c=0;c<n.it-r;c++)a+=gT(n.it-1)+"<"+n.ls+"l>\n",i.push(gT(n.it-1)+"</"+n.ls+"l>\n");a+=gT(n.it)+"<li>"+pT(n.v)+"</li>\n",r=n.it}else a+=gT(n.it)+"\t"+pT(n.v)+"<br>\n";else{for(c=0;c<i.length;c++)a+=i.pop();r=0}switch(n.tp){case"raw":a+=n.v+"\n";break;case"text":a+=sH("p",n.v);break;case"hd":a+=sH("h"+n.py,n.v);break;case"sub":case"sup":case"code":case"nav":case"blockquote":a+=sH(n.tp,n.v);break;case"mq":var l=pT(n.v);a+="<marquee direction='"+n.dr+"'>"+l+"</marquee>\n";break;case"cm":a+="\x3c!--"+n.v+"--\x3e\n";break;case"ig":a+="<img "+aI()+"alt='"+n.alt+"' src='"+n.url+"' >\n";break;case"ct":a+="\n<"+n.tag+(n.classname?" class='"+n.classname+"'":"")+(n.id?" id='"+n.id+"'":"")+" >\n";break;case"cs":a+='\n<div meno-col style="'+sp("column-count",n.count)+(n.rule?sp("column-rule",n.rule):"")+'">\n';break;case"cct":a+="</"+n.tag+">\n";break;case"br":case"hr":a+="<"+n.tp+("hr"==n.tp?aI():"")+">\n";break;case"cl":a+="\n<div meno-hr style='background-color:"+n.v+"'></div>\n";break;case"ad":a+='\n<audio controls type="'+n.mime+'" src="'+n.src+'"></audio>\n';break;case"ds":a+="\n<details>\n"+(n.title?"<summary>"+n.title+"</summary>\n":"")+"<span>"+n.v.replace(/(\200)/g,"<br>")+"</span>\n</details>\n";break;case"attr":""==n.n?(at={},sl={}):-1!=sL.indexOf(n.n)?sl[n.n]=n.v:-1!=aL.indexOf(n.n)&&(at[n.n]=n.v);break;default:a=a}}return at={},sl={},a},parse=function(e){var t;return t=P(e),pH(t)},r.convert=function(){for(var e=document.querySelectorAll("script[type='text/meno']"),t=0;t<e.length;t++){for(var n=e[t].innerHTML,i=document.createElement("article"),a=0;a<e[t].attributes.length;a++){var c=e[t].attributes[a];"type"!=c.name&&i.setAttribute(c.name,c.value)}i.className+=" meno",e[t].parentNode.insertBefore(i,e[t]),i.innerHTML=r.parsed(n),e[t].parentNode.removeChild(e[t])}},r}();