var meno=function(){var e,n,t,o={version:"0.9.9"};return o.checkUpdates=function(){X(function(e){try{var n=/version:"(.+?)"/.exec(e)[1];o.version<n?console.log("An updated Meno ("+n+") is available !\n(this Meno: "+o.version+")\nGo to https://github.com/Fleurman/meno-markup/ to get the lastest version."):console.log("this Meno ("+o.version+") is up to date ! :)")}catch(e){console.log(e,"Unable to connect to https://raw.githubusercontent.com/Fleurman/meno-markup/master/meno.min.js")}},"https://raw.githubusercontent.com/Fleurman/meno-markup/master/meno.min.js")},X=function(e,n){var t=new XMLHttpRequest;t.onload=function(n){e(this.responseText)},t.open("GET",n,!0),t.send(null)},o.putRaw=function(e,n,t){X(function(t){e[n]=t},t)},o.writeTo=function(e,n){X(function(n){var t=n.split(/\r\n|\r|\n/);I(e,parse(t))},n)},o.displayTo=function(e,n){var t=n.split(/\r\n|\r|\n/);I(e,parse(t))},o.parsed=function(e){var n=e.split(/\r\n|\r|\n/);return parse(n)},I=function(e,n){e.innerHTML=n},P=function(e){for(var n={},t={id:0,iB:!1,iR:!1,ls:0,ct:[],bD:0};void 0!==e[t.id];){var o,r,i=e[t.id].trim();if(1==t.iR)"><"==i?(t.bD++,t.iR=!1):n[t.bD].v+=i;else if(1==t.iB){if(o=/^(.*)(\]?)/.exec(i)){var l="]"==o[1][o[1].length-1],a=o[1].replace(/\]$/m,"");n[t.bD].v+=" \n"+a,l&&(t.bD++,t.iB=!1)}}else{if(o=/^(:{1,6})(\[)? (.+)/.exec(i))r={tp:"hd",py:o[1].length,v:o[3]},o[2]&&(t.iB=!0);else if(o=/^-{3,}([^ -]+)?$/.exec(i))r={tp:"hr"},void 0!=o[1]&&(r.tp="cl",r.v=o[1]);else if(o=/^__(-{2,}|:{2,}|\]{2,})_/.exec(i))r={tp:"cs",rule:rule(o[1][0]),count:o[1].length,tag:"div"},t.ct.push("div");else if(o=/^_(.*):(.*)/.exec(i))r={tp:"attr",n:o[1],v:o[2]};else if(o=/^(<-|->)(.*)\1/.exec(i))r={tp:"mq",v:o[2],dr:"<-"==o[1]?"left":"right"};else if(o=/^<>(.*)<>/.exec(i))r={tp:"nav",v:o[1]};else if(o=/^__([^_ ]+)_(.*)/.exec(i))r={tp:"ct",tag:o[1]},t.ct.push(o[1]),o[2]&&("#"==o[2][0]?r.id=o[2].slice(1,o[2].length):r.cls=o[2]);else if("____"==i&&t.ct.length>0)r={tp:"cct",tag:t.ct.pop()};else if(o=/^<([\w]+?):([^>]+)>/.exec(i))r={tp:"ad",mime:gM(o[1]),src:o[2]};else if(o=/^:(.*?)>(\[??)?(.+)/.exec(i))r={tp:"ds",v:o[3]},is(o[1])&&(r.title=o[1]),o[2]&&(t.iB=!0);else if(o=/^><(.?)$/.exec(i))r={tp:"raw",v:o[1]},is(o[1])&&(t.iR=!0,r.v="");else if(o=/^\[([^\[]*)\[(.+)/g.exec(i))r={tp:"ig",alt:o[1],url:o[2]};else if(o=/^(-+|\]+|\^+) (.+)/.exec(i)){r={tp:"list-item",ls:{"-":"u","]":"o","^":"f"}[o[1][0]],v:o[2],it:o[1].length}}else(o=/^(<|-_-|;)(\[)? (.+)/.exec(i))?(r={tp:tW(o[1]),v:o[3]},o[2]&&(t.iB=!0)):r="-"==i||":"==i?{tp:tW(i)}:(o=/^(.+)/.exec(i))?{tp:"text",v:o[1]}:{tp:""};"blank"!=r.tp&&(n[t.bD-1]&&"text"==r.tp&&n[t.bD-1].tp==r.tp?n[t.bD-1].v+="\n"+r.v:(n[t.bD]=r,0==t.iB&&0==t.iR&&t.bD++))}t.id++}return n},is=function(e){return e.trim().length>1},rule=(e={":":"4px dotted lightgrey","]":"1px solid lightgrey"},function(n){return!!e[n]&&e[n]}),tW=(n={"-":"br",":":"blank","<":"blockquote","-_-":"cm",";":"code"},function(e){return n[e]||e}),gM=(t={mp3:"mpeg",ogg:"ogg"},function(e){return"audio/"+t[e]}),dP=function(e,n,t){return e=(e=e.replace(Reg.w(n),Rep.word.bind(Rep,t))).replace(Reg.b(n),Rep.bloc.bind(Rep,t))},pT=function(e){e=(e=(e=e.replace(/</g,"&lt;")).replace(Reg.l(),Rep.link)).replace(/(?:^| )\[([^\]:]+?):(.+?)\](?: |$|)/gm,Rep.hint);for(var n=["__","sub","\\^\\^","sup","\\^","i","&lt;&lt;","b","&lt;","q",">>","small","_","u","--","del",";;","samp","->","mark"],t=0;t<n.length;t+=2)e=dP(e,n[t],n[t+1]);return e=(e=(e=(e=(e=e.replace(Reg.w(";"),Rep.wcode)).replace(Reg.b(";"),Rep.code)).replace(/(?: |^)\[([^\[]+)\[([^ ]+)(?: |$)/gm,Rep.ii)).replace(Reg.b(">&lt;"),Rep.raw)).replace(/(\200)/g,"<br>"),unescape(e)},pL=function(e){var n=e;return n=n.replace(/(?: |^)\[([^\[]+)\[([^ ]+)(?: |$)/gm,Rep.im)},Reg={w:function(e){return new RegExp("(?: |^)"+e+"([^ \\n\\.\\[]+)(?: |$)","g")},b:function(e){return new RegExp("(?: |^)"+e+"\\[(.+?)\\](?: |$)","g")},l:function(e){return new RegExp("(?: |^)>([^><]+?)(&lt;|>)([^ ;]+);?([^ ]*?)( ||$)","gm")}},Rep={H:function(e,n){return" <"+e+">"+n+"</"+e+"> "},I:function(e,n,t){return' <img alt="'+e+'" src="'+n+'" '+(t?'style="display:inline;"':"")+' title="'+e+'" > '},raw:function(e,n){return n},code:function(e,n){return" <code meno-inblock >"+escape(n)+"</code> "},wcode:function(e,n){return Rep.code(e,Rep.ws(n))},link:function(e,n,t,o,r,i){return " <a href='"+o+"' target='"+(">"==t?"_blank":"_self")+"' "+aI()+(r?'download="'+r+'"':"")+">"+(" "==n?o:pL(n))+"</a> "+i},im:function(e,n,t){return Rep.I(n,t)},ii:function(e,n,t){return Rep.I(n,t,!0)},hint:function(e,n,t){return' <span meno-tip="'+t+'">'+pT(n)+"</span> "},ws:function(e){return e.replace(/(_)/gm," ")},word:function(e,n,t){return Rep.H(e,Rep.ws(t))},bloc:function(e,n,t){return Rep.H(e,t)}},attr={},style={},aL=["class", "name", "title"],sL=["cursor","color","font","float"],aI=function(){var e=" ";return e+=aA(),e+=aS()},aA=function(){var e=Object.keys(attr);if(e.length<1)return"";var n=" ";for(i in e){var t=attr[e[i]];""!=t&&(n+=e[i]+'="'+t+'" ')}return n},aS=function(){var e=Object.keys(style);if(e.length<1)return"";var n=' style="';for(i in e){var t=style[e[i]];""!=t&&(n+=e[i]+":"+t+";")}return n+='"'},gT=function(e){for(var n="",t=0;t<e;t++)n+="  ";return n},sH=function(e,n,t){return"<"+e+(t?"":aI())+">"+pT(n)+"</"+e+">\n"},sp=function(e,n){return"-webkit-"+e+":"+n+";-moz-"+e+":"+n+";"+e+":"+n+";"},pH=function(e){var n=0,t={},o=0,r=[],i="";for(n in e){if("list-item"==(t=e[n]).tp)if("f"!=t.ls){if(t.it<o)for(var l=0;l<o-t.it;l++)i+=r.pop();if(t.it>o)for(l=0;l<t.it-o;l++)i+=gT(t.it-1)+"<"+t.ls+"l>\n",r.push(gT(t.it-1)+"</"+t.ls+"l>\n");i+=gT(t.it)+"<li>"+pT(t.v)+"</li>\n",o=t.it}else i+=gT(t.it)+"\t"+pT(t.v)+"<br>\n";else{for(l=0;l<r.length;l++)i+=r.pop();o=0}switch(t.tp){case"raw":i+=t.v+"\n";break;case"text":i+=sH("p",t.v);break;case"hd":i+=sH("h"+t.py,t.v);break;case"sub":case"sup":case"code":case"nav":case"blockquote":i+=sH(t.tp,t.v);break;case"mq":var a=pT(t.v);i+="<marquee direction='"+t.dr+"'>"+a+"</marquee>\n";break;case"cm":i+="\x3c!--"+t.v+"--\x3e\n";break;case"ig":i+="<img "+aI()+"alt='"+t.alt+"' src='"+t.url+"' >\n";break;case"ct":i+="\n<"+t.tag+(t.cls?" class='"+t.cls+"'":"")+(t.id?" id='"+t.id+"'":"")+" >\n";break;case"cs":i+='\n<div meno-col style="'+sp("column-count",t.count)+(t.rule?sp("column-rule",t.rule):"")+'">\n';break;case"cct":i+="</"+t.tag+">\n";break;case"br":case"hr":i+="<"+t.tp+("hr"==t.tp?aI():"")+">\n";break;case"cl":i+="\n<div meno-hr style='background-color:"+t.v+"'></div>\n";break;case"ad":i+='\n<audio'+aI()+'controls type="'+t.mime+'" src="'+t.src+'"></audio>\n';break;case"ds":i+="\n<details"+aI()+">\n"+(t.title?"<summary>"+t.title+"</summary>\n":"")+"<span>"+t.v.replace(/(\200)/g,"<br>")+"</span>\n</details>\n";break;case"attr":""==t.n?(attr={},style={}):-1!=sL.indexOf(t.n)?style[t.n]=t.v:-1!=aL.indexOf(t.n)?attr[t.n]=t.v:"";break;default:i=i}}attr={};style={};return i},parse=function(e){var n;return n=P(e),pH(n)},o.css=".meno{font-family:Calibri}.meno code{display:block;background-color:#f5f5f5;color:#696969;font-family:consolas}.meno textarea{resize:none}.meno details{border-bottom:2px dotted #d3d3d3;border-right:2px dotted #d3d3d3}.meno details span{color:grey;font-size:.9em;padding-left:20px;display:block}.meno [meno-inblock],.meno nav,.meno ol,.meno ul{display:inline-block}.meno h1,h2,h3,h4,h5,h6{margin-bottom:0}.meno a{color:#87ceeb;text-decoration:none;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3}.meno article{font-family:Consolas}.meno nav{margin:5px;padding:0 5px;border-right:2px solid #d3d3d3;border-left:2px solid #d3d3d3;background-color:#fafafa}.meno nav a{border:none}.meno blockquote{font-style:italic;margin-left:1em}.meno blockquote:before{content:''' '}.meno blockquote:after{content:' '''}.meno ul{padding:5px;border-top:2px solid #d3d3d3;border-bottom:2px solid #d3d3d3}.meno ul ol,.meno ul ul{border:none;padding:2px;margin-left:20px}.meno ul>li{font-size:1.2em;font-weight:700;list-style-type:none}.meno ul>li:before{content:'| '}.meno ul ul>li{font-size:1.1em;font-weight:700;color:#696969}.meno ul ul>li:before{content:': ';color:#000}.meno ul ul ul>li{font-size:1.05em;font-weight:400;color:grey}.meno ul ul ul>li:before{content:'· ';color:#000}.meno ul ul ul ul>li{font-size:1em;font-weight:400;color:#000}.meno ul ul ul ul>li:before{content:'- ';color:#000}.meno ol{padding:5px;list-style-position:inside;border-top:2px solid #d3d3d3;border-bottom:2px solid #d3d3d3}.meno ol ol,.meno ol ul{border:none;padding:2px;margin-left:20px}.meno ol>li{font-size:1.2em;font-weight:700;border-bottom:1px dashed #d3d3d3}.meno ol ol>li{font-size:1.1em;font-weight:700;color:#696969;border-bottom:none}.meno ol ol ol>li{font-size:1.05em;font-weight:400;color:grey}.meno ol ol ol ol>li{font-size:1em;font-weight:400;color:#000}.meno [meno-hr]{height:2px;margin:1em 0}.meno [meno-col] p{margin-top:0}.meno [meno-underline]{text-decoration:underline}.meno [meno-tip]{position:relative;display:inline;border-bottom:1px dotted pink}.meno [meno-tip]::after{content:attr(meno-tip);font-size:13px;min-width:100px;min-heigh:100px;background-color:rgba(50,50,50,.8);color:#fff;border-bottom:2px solid orange;border-radius:10px 0;padding:3px 8px;position:absolute;bottom:100%;left:50%;opacity:0;visibility:hidden;transition:opacity .3s}.meno [meno-tip]:hover::after{opacity:1;visibility:visible}.meno [meno-tip]:hover{border:1px solid orange;margin:-1px;background-color:rgba(250,250,100,.1);cursor:help}.meno ::selection{background-color:orange;color:#fff}",o.addCSS=function(){var e=document.createElement("style");e.innerHTML=o.css;var n=document.getElementsByTagName("style"),t=document.getElementsByTagName("link");n.length>0?document.head.insertBefore(e,n[0]):t.length>0?document.head.insertBefore(e,t[0]):document.head.appendChild(e)},o.convert=function(){for(var e=document.querySelectorAll("script[type='text/meno']"),n=0;n<e.length;n++){var t=e[n].innerHTML,r=document.createElement("article");for(var i=0;i<e[n].attributes.length;i++){var l=e[n].attributes[i];"type"!=l.name&&r.setAttribute(l.name,l.value)}r.className+=" meno",e[n].parentNode.insertBefore(r,e[n]),r.innerHTML=o.parsed(t),e[n].parentNode.removeChild(e[n])}},o}();