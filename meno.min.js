<<<<<<< HEAD
var meno={};meno.loadFile=function(e,n){const a=new XMLHttpRequest;a.onreadystatechange=function(n){this.readyState===XMLHttpRequest.DONE&&200===this.status&&e(this.responseText)},a.open("GET",n,!0),a.send(null)},meno.readFile=function(e){meno.loadFile(function(e){return e},e)},meno.putRaw=function(e,n,a){meno.loadFile(function(a){e[n]=a},a)},meno.writeTo=function(e,n){meno.loadFile(function(n){var a=n,r=a.split(/\r\n|\r|\n/);meno.setWin(e,meno.parse(r))},n)},meno.displayTo=function(e,n){var a=n.split(/\r\n|\r|\n/);meno.setWin(e,meno.parse(a))},meno.setWin=function(e,n){e.innerHTML=n},meno.parseRaw=function(e){for(var n={},a="",r=0,t=!1,l="",o=0;void 0!==e[r];){a=e[r],a=meno.skipSpace(a);var c,i;if(1==t){if(c=/^(.*)(\]?)/.exec(a)){var p=c[1].endsWith(" ]"),u=c[1].replace(/\]$/m,"");n[o].value+="\n  \n"+u,p&&(o++,t=!1)}}else(c=/^(:{1,6})(\[)? (.+)/.exec(a))?(i={type:"header",priority:c[1].length,value:c[3]},c[2]&&(t=!0)):(c=/^(-{3,})$/.exec(a))?i={type:"line"}:(c=/^(-{3,})([^ -]+)/.exec(a))?i={type:"colorline",value:c[2]}:(c=/^_(.*)=(.*)/.exec(a))?i={type:"variable",name:c[1],value:c[2]}:(c=/^<-(.*)<-/.exec(a))?i={type:"marquee",value:c[1],direction:"left"}:(c=/^->(.*)->/.exec(a))?i={type:"marquee",value:c[1],direction:"right"}:(c=/^<>(.*)<>/.exec(a))?i={type:"navigation",value:c[1]}:(c=/^_([^_]+)_(.*)/.exec(a))?(i={type:"container",tag:c[1]},l=c[1],c[2]&&(i.classname=c[2])):"___"==a&&l?(i={type:"closecontainer",tag:l},l=""):(c=/^>([^>]+)>([^ ]+)/.exec(a))?(i={type:"link",url:c[2]}," "!=c[1]?i.value=c[1]:i.value=c[2]):(c=/^\[([^\[]*)\[(.+)/g.exec(a))?i={type:"image",alt:c[1],url:c[2]}:(c=/^(-*) (.+)/.exec(a))?i={type:"list-item",list:"u",value:c[2],indent:c[1].length}:(c=/^(\]*) (.+)/.exec(a))?i={type:"list-item",list:"o",value:c[2],indent:c[1].length}:(c=/^<(\[)? (.+)/.exec(a))?(i={type:"quote",value:c[2]},c[1]&&(t=!0)):(c=/^-_-(\[)? (.+)/.exec(a))?(i={type:"comment",value:c[2]},c[1]&&(t=!0)):(c=/^;(\[)? (.+)/m.exec(a))?(i={type:"code",value:c[2]},c[1]&&(t=!0)):i="-"==a?{type:"return"}:":"==a?{type:"blank"}:(c=/^(.+)/.exec(a))?{type:"text",value:c[1]}:{type:"break"},"blank"!=i.type&&(n[o-1]&&"text"==i.type&&n[o-1].type==i.type?n[o-1].value+="\n  \n"+i.value:(n[o]=i,0==t&&o++));r++}return n},meno.skipSpace=function(e){var n=e.search(/\S/);return-1==n?"":e.slice(n)},meno.parseText=function(e){var n=e;return n=n.replace(/(^<| <)([^< \[]+)( |$)/gm,meno.replace.quote),n=n.replace(/(^<| <)\[(.+)\]( |$)/gm,meno.replace.quote),n=n.replace(/(^<<| <<)([^ \[]+)( |$)/gm,meno.replace.bold),n=n.replace(/(^<<| <<)\[(.+)\]( |$)/gm,meno.replace.bold),n=n.replace(/(^>>| >>)([^ \[]+)( |$)/gm,meno.replace.small),n=n.replace(/(^>>| >>)\[(.+)\]( |$)/gm,meno.replace.small),n=n.replace(/(^_| _)([^ \[_]+)( |$)/gm,meno.replace.underline),n=n.replace(/(^_| _)\[([^\]_]+)\]( |$)/gm,meno.replace.underline),n=n.replace(/(^;| ;)\[(.+)\]( |$)/gm,meno.replace.code),n=n.replace(/(^;| ;)([^ \[]+)( |$)/gm,meno.replace.code),n=n.replace(/(^;| ;)(\[)( |$)/gm,meno.replace.code),n=n.replace(/(^>| >)([^>]+)>([^ ]+)( |$)/g,meno.replace.link),n=n.replace(/(^\[| \[)([^\]:]+):(.*)?\](.| |$)/g,meno.replace.hint),n=n.replace(/(\200)/g,"<br >")},meno.parseLink=function(e){var n=e;return n=n.replace(/\]([^\]]+)\](([^ ]+){1})/g,meno.replace.image)},meno.replace={code:function(e,n,a,r){return" <code style='display:inline-block;'>"+a+"</code> "+r},quote:function(e,n,a,r){return" <em>"+a+"</em> "+r},underline:function(e,n,a,r){return" <span style='text-decoration:underline;'>"+a+"</span>"+r},bold:function(e,n,a,r){return" <strong>"+a+"</strong>"+r},small:function(e,n,a,r){return" <small>"+a+"</small> "+r},link:function(e,n,a,r){var t=" "==a?r:a;return" <a href='"+r+"'>"+t+"</a> "},image:function(e,n,a){return"<img alt='"+n+"' src='"+a+"' />\n"},hint:function(e,n,a,r,t){return"<span class='tt'> "+meno.parseText(a)+"<span class='ttt'>"+r+"</span></span>"+t}},meno.produceHTML=function(e){var n=0,a={},r=0,t=[],l="";for(n in e){switch(a=e[n],a.type){case"list-item":if(a.indent<r){var o=0;for(o=0;o<r-a.indent;o++)l+=t.pop()}if(a.indent>r){var o=0;for(o=0;o<a.indent-r;o++)l+="<"+a.list+"l>\n";t.push("</"+a.list+"l>\n")}var c=meno.parseText(a.value);l+="<li>"+c+"</li>\n",r=a.indent;break;default:if(r>0){var o=0;for(o=0;r>o;o++)l+=t.pop()}r=0}switch(a.type){case"text":var c=meno.parseText(a.value);l+="<p>"+c+"</p>\n";break;case"header":l+="<h"+a.priority+">"+a.value+"</h"+a.priority+">\n";break;case"quote":var c=meno.parseText(a.value);l+="<blockquote>"+c+"</blockquote>\n";break;case"marquee":var c=meno.parseText(a.value);l+="<marquee>"+c+"</marquee>\n";break;case"navigation":var c=meno.parseText(a.value);l+="<nav>"+c+"</nav>\n";break;case"comment":l+="<!--"+a.value+"-->\n";break;case"code":l+="<code>"+a.value+"</code>\n";break;case"image":l+="<img alt='"+a.alt+"' src='"+a.url+"' />\n";break;case"link":l+="<a href='"+a.url+"' target='_blank'>"+meno.parseLink(a.value)+"</a>\n";break;case"container":l+="\n<"+a.tag,a.classname&&(l+=" class='"+a.classname+"'"),l+=" >\n";break;case"closecontainer":l+="</"+a.tag+">\n";break;case"return":l+="\n <br /> \n";break;case"line":l+="\n <hr /> \n";break;case"colorline":l+="\n<div style='height:2px;margin:1em 0;background-color:"+a.value+"'></div>\n";break;default:l=l}}return l},meno.parse=function(e){var n;n=meno.parseRaw(e);var a=meno.produceHTML(n);return a};
=======
var meno={};meno.loadFile=function(e,n){var a=new XMLHttpRequest;a.open("GET",n,!1),a.onreadystatechange=function(){a.responseText&&e(a.responseText)},a.send(null)},meno.readFile=function(e){meno.loadFile(function(e){return e},e)},meno.putRaw=function(e,n,a){meno.loadFile(function(a){e[n]=a},a)},meno.writeTo=function(e,n){meno.loadFile(function(n){var a=n,r=a.split(/\r\n|\r|\n/);meno.setWin(e,meno.parse(r))},n)},meno.displayTo=function(e,n){var a=n.split(/\r\n|\r|\n/);meno.setWin(e,meno.parse(a))},meno.setWin=function(e,n){e.innerHTML=n},meno.parseRaw=function(e){for(var n={},a="",r=0,t=!1,l="",o=0;void 0!==e[r];){a=e[r],a=meno.skipSpace(a);var c,i;if(1==t){if(c=/^(.*)(\]?)/.exec(a)){var p=c[1].endsWith(" ]"),u=c[1].replace(/\]$/m,"");n[o].value+="\n  \n"+u,p&&(o++,t=!1)}}else(c=/^(:{1,6})(\[)? (.+)/.exec(a))?(i={type:"header",priority:c[1].length,value:c[3]},c[2]&&(t=!0)):(c=/^(-{3,})$/.exec(a))?i={type:"line"}:(c=/^(-{3,})([^ -]+)/.exec(a))?i={type:"colorline",value:c[2]}:(c=/^_(.*)=(.*)/.exec(a))?i={type:"variable",name:c[1],value:c[2]}:(c=/^<>(.*)<>/.exec(a))?i={type:"marquee",value:c[1]}:(c=/^_([^_]+)_(.*)/.exec(a))?(i={type:"container",tag:c[1]},l=c[1],c[2]&&(i.classname=c[2])):"___"==a&&l?(i={type:"closecontainer",tag:l},l=""):(c=/^>([^>]+)>([^ ]+)/.exec(a))?(i={type:"link",url:c[2]}," "!=c[1]?i.value=c[1]:i.value=c[2]):(c=/^\[([^\[]*)\[(.+)/g.exec(a))?i={type:"image",alt:c[1],url:c[2]}:(c=/^(-*) (.+)/.exec(a))?i={type:"list-item",list:"u",value:c[2],indent:c[1].length}:(c=/^(\]*) (.+)/.exec(a))?i={type:"list-item",list:"o",value:c[2],indent:c[1].length}:(c=/^<(\[)? (.+)/.exec(a))?(i={type:"quote",value:c[2]},c[1]&&(t=!0)):(c=/^-_-(\[)? (.+)/.exec(a))?(i={type:"comment",value:c[2]},c[1]&&(t=!0)):(c=/^;(\[)? (.+)/m.exec(a))?(i={type:"code",value:c[2]},c[1]&&(t=!0)):i="-"==a?{type:"return"}:":"==a?{type:"blank"}:(c=/^(.+)/.exec(a))?{type:"text",value:c[1]}:{type:"break"},"blank"!=i.type&&(n[o-1]&&"text"==i.type&&n[o-1].type==i.type?n[o-1].value+="\n  \n"+i.value:(n[o]=i,0==t&&o++));r++}return n},meno.skipSpace=function(e){var n=e.search(/\S/);return-1==n?"":e.slice(n)},meno.parseText=function(e){var n=e;return n=n.replace(/(^<| <)([^< \[]+)( |$)/gm,meno.replace.quote),n=n.replace(/(^<| <)\[(.+)\]( |$)/gm,meno.replace.quote),n=n.replace(/(^<<| <<)([^ \[]+)( |$)/gm,meno.replace.bold),n=n.replace(/(^<<| <<)\[(.+)\]( |$)/gm,meno.replace.bold),n=n.replace(/(^>>| >>)([^ \[]+)( |$)/gm,meno.replace.small),n=n.replace(/(^>>| >>)\[(.+)\]( |$)/gm,meno.replace.small),n=n.replace(/(^_| _)([^ \[_]+)( |$)/gm,meno.replace.underline),n=n.replace(/(^_| _)\[([^\]_]+)\]( |$)/gm,meno.replace.underline),n=n.replace(/(^;| ;)\[(.+)\]( |$)/gm,meno.replace.code),n=n.replace(/(^;| ;)([^ \[]+)( |$)/gm,meno.replace.code),n=n.replace(/(^;| ;)(\[)( |$)/gm,meno.replace.code),n=n.replace(/ >([^>]+)>([^ ]+)( |$)/g,meno.replace.link),n=n.replace(/(\200)/g,"<br >")},meno.parseLink=function(e){var n=e;return n=n.replace(/\]([^\]]+)\](([^ ]+){1})/g,meno.replace.image)},meno.replace={code:function(e,n,a,r){return" <code style='display:inline-block;'>"+a+"</code> "+r},quote:function(e,n,a,r){return" <em>"+a+"</em> "+r},underline:function(e,n,a,r){return" <span style='text-decoration:underline;'>"+a+"</span>"+r},bold:function(e,n,a,r){return" <strong>"+a+"</strong>"+r},small:function(e,n,a,r){return" <small>"+a+"</small> "+r},link:function(e,n,a){var r=" "==n?a:n;return" <a href='"+a+"'>"+r+"</a> "},image:function(e,n,a){return"<img alt='"+n+"' src='"+a+"' />\n"}},meno.produceHTML=function(e){var n=0,a={},r=0,t=[],l="";for(n in e){switch(a=e[n],a.type){case"list-item":if(a.indent<r){var o=0;for(o=0;o<r-a.indent;o++)l+=t.pop()}if(a.indent>r){var o=0;for(o=0;o<a.indent-r;o++)l+="<"+a.list+"l>\n";t.push("</"+a.list+"l>\n")}var c=meno.parseText(a.value);l+="<li>"+c+"</li>\n",r=a.indent;break;default:if(r>0){var o=0;for(o=0;r>o;o++)l+=t.pop()}r=0}switch(a.type){case"text":var c=meno.parseText(a.value);l+="<p>"+c+"</p>\n";break;case"header":l+="<h"+a.priority+">"+a.value+"</h"+a.priority+">\n";break;case"quote":var c=meno.parseText(a.value);l+="<blockquote>"+c+"</blockquote>\n";break;case"marquee":var c=meno.parseText(a.value);l+="<marquee>"+c+"</marquee>\n";break;case"comment":l+="<!--"+a.value+"-->\n";break;case"code":l+="<code>"+a.value+"</code>\n";break;case"image":l+="<img alt='"+a.alt+"' src='"+a.url+"' />\n";break;case"link":l+="<a href='"+a.url+"' target='_blank'>"+meno.parseLink(a.value)+"</a>\n";break;case"container":l+="\n<"+a.tag,a.classname&&(l+=" class='"+a.classname+"'"),l+=" >\n";break;case"closecontainer":l+="</"+a.tag+">\n";break;case"return":l+="\n <br /> \n";break;case"line":l+="\n <hr /> \n";break;case"colorline":l+="\n<div style='height:2px;margin:1em 0;background-color:"+a.value+"'></div>\n";break;default:l=l}}return l},meno.parse=function(e){var n;n=meno.parseRaw(e);var a=meno.produceHTML(n);return a};
>>>>>>> 324ed1311e113b7cf13ae7bd575a0894af1e83a8
