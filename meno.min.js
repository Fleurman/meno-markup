var meno={version:"0.9.3",loadFile:function(e,n){var o=new XMLHttpRequest;o.onload=function(n){e(this.responseText)},o.open("GET",n,!0),o.send(null)},readFile:function(e){meno.loadFile(function(e){return e},e)},putRaw:function(e,n,o){meno.loadFile(function(o){e[n]=o},o)},writeTo:function(e,n){meno.loadFile(function(n){var o=n.split(/\r\n|\r|\n/);meno.setWin(e,meno.parse(o))},n)},displayTo:function(e,n){var o=n.split(/\r\n|\r|\n/);meno.setWin(e,meno.parse(o))},parsed:function(e){var n=e.split(/\r\n|\r|\n/);return meno.parse(n)},setWin:function(e,n){e.innerHTML=n},parseRaw:function(e){for(var n={},o="",t=0,r=!1,l=[],a=0;void 0!==e[t];){var i,c;if(o=e[t],o=meno.skipSpace(o),1==r){if(i=/^(.*)(\]?)/.exec(o)){var m="]"==i[1][i[1].length-1],s=i[1].replace(/\]$/m,"");n[a].value+=" \n"+s,m&&(a++,r=!1)}}else{if(i=/^(:{1,6})(\[)? (.+)/.exec(o))c={type:"header",priority:i[1].length,value:i[3]},i[2]&&(r=!0);else if(i=/^(-{3,})$/.exec(o))c={type:"line"};else if(i=/^(-{3,})([^ -]+)/.exec(o))c={type:"colorline",value:i[2]};else if(i=/^_(.*):(.*)/.exec(o))c={type:"attr",name:i[1],value:i[2]};else if(i=/^<-(.*)<-/.exec(o))c={type:"marquee",value:i[1],direction:"left"};else if(i=/^->(.*)->/.exec(o))c={type:"marquee",value:i[1],direction:"right"};else if(i=/^<>(.*)<>/.exec(o))c={type:"navigation",value:i[1]};else if(i=/^_([^_]+)_(.*)/.exec(o)){c={type:"container",tag:i[1]},l.push(i[1]);var d=i[2];d&&("#"==d[0]?c.id=d.slice(1,d.length):c.classname=d)}else"___"==o&&l?c={type:"closecontainer",tag:l.pop()}:(i=/^>([^>]+)>([^ ]+)/.exec(o))?(c={type:"link",url:i[2]}," "!=i[1]?c.value=i[1]:c.value=i[2]):(i=/^\[([^\[]*)\[(.+)/g.exec(o))?c={type:"image",alt:i[1],url:i[2]}:(i=/^(-*) (.+)/.exec(o))?c={type:"list-item",list:"u",value:i[2],indent:i[1].length}:(i=/^(\]*) (.+)/.exec(o))?c={type:"list-item",list:"o",value:i[2],indent:i[1].length}:(i=/^<(\[)? (.+)/.exec(o))?(c={type:"quote",value:i[2]},i[1]&&(r=!0)):(i=/^-_-(\[)? (.+)/.exec(o))?(c={type:"comment",value:i[2]},i[1]&&(r=!0)):(i=/^;(\[)? (.+)/m.exec(o))?(c={type:"code",value:i[2]},i[1]&&(r=!0)):c="-"==o?{type:"return"}:":"==o?{type:"blank"}:"_: "==o?{type:"blank"}:(i=/^(.+)/.exec(o))?{type:"text",value:i[1]}:{type:"break"};"blank"!=c.type&&(n[a-1]&&"text"==c.type&&n[a-1].type==c.type?n[a-1].value+="\n"+c.value:(n[a]=c,0==r&&a++))}t++}return n},skipSpace:function(e){var n=e.search(/\S/);return-1==n?"":e.slice(n)},parseText:function(e){var n=e;return n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/(^<| <)([^< \[]+)( |$)/gm,meno.replace.quote)).replace(/(^<| <)\[(.+)\]( |$)/gm,meno.replace.quote)).replace(/(^<<| <<)([^ \[]+)( |$)/gm,meno.replace.bold)).replace(/(^<<| <<)\[(.+)\]( |$)/gm,meno.replace.bold)).replace(/(^>>| >>)([^ \[]+)( |$)/gm,meno.replace.small)).replace(/(^>>| >>)\[(.+)\]( |$)/gm,meno.replace.small)).replace(/(^_| _)([^ \[_]+)( |$)/gm,meno.replace.underline)).replace(/(^_| _)\[([^\]_]+)\]( |$)/gm,meno.replace.underline)).replace(/(^;| ;)\[(.+)\]( |$)/gm,meno.replace.code)).replace(/(^;| ;)([^ \[]+)( |$)/gm,meno.replace.code)).replace(/(^;| ;)(\[)( |$)/gm,meno.replace.code)).replace(/(^>| >)([^>]+)>([^ ]+)( |$)/g,meno.replace.link)).replace(/(^\[| \[)([^\]:]+):(.*)?\](.| |$)/g,meno.replace.hint)).replace(/(\200)/g,"<br >")},parseLink:function(e){var n=e;return n=n.replace(/\]([^\]]+)\](([^ ]+){1})/g,meno.replace.image)},attr:{},style:{},attrList:["title","id","name","class"],styleList:["cursor","color","font"],addInlines:function(){var e="";return e+=this.addAttr(),e+=this.addStyle()},addAttr:function(){var e=Object.keys(meno.attr);if(0==e.length)return"";var n=" ";for(i in e){var o=meno.attr[e[i]];""!=o&&(n+=e[i]+'="'+o+'" ')}return n},addStyle:function(){var e=Object.keys(meno.style);if(0==e.length)return"";var n=' style="';for(i in e){var o=meno.style[e[i]];""!=o&&(n+=e[i]+":"+o+";")}return n+='"'},replace:{code:function(e,n,o,t){return" <code meno-inblock >"+o+"</code> "+t},quote:function(e,n,o,t){return" <q>"+o+"</q> "+t},underline:function(e,n,o,t){return" <span meno-underline>"+o+"</span>"+t},bold:function(e,n,o,t){return" <strong>"+o+"</strong>"+t},small:function(e,n,o,t){return" <small>"+o+"</small> "+t},link:function(e,n,o,t){var r=" "==o?t:o;return" <a href='"+t+"' target='_blank' "+meno.addInlines()+">"+r+"</a> "},image:function(e,n,o){return"<img alt='"+n+"' src='"+o+"' />\n"},hint:function(e,n,o,t,r){return" <span meno-tip>"+meno.parseText(o)+"<span meno-tipbox>"+t+"</span></span>"+r},title:function(e,n,o,t,r){return" "}},produceHTML:function(e){var n=0,o={},t=0,r=[],l="";for(n in e){switch((o=e[n]).type){case"list-item":if(o.indent<t){var a=0;for(a=0;a<t-o.indent;a++)l+=r.pop()}if(o.indent>t){for(a=0,a=0;a<o.indent-t;a++)l+="<"+o.list+"l>\n";r.push("</"+o.list+"l>\n")}l+="<li>"+(i=meno.parseText(o.value))+"</li>\n",t=o.indent;break;default:if(t>0)for(a=0,a=0;a<t;a++)l+=r.pop();t=0}switch(o.type){case"text":var i=meno.parseText(o.value);l+="<p "+meno.addInlines()+">"+i+"</p>\n";break;case"header":l+="<h"+o.priority+" "+meno.addInlines()+">"+o.value+"</h"+o.priority+">\n";break;case"quote":i=meno.parseText(o.value),l+="<blockquote "+meno.addInlines()+">"+i+"</blockquote>\n";break;case"marquee":l+="<marquee>"+(i=meno.parseText(o.value))+"</marquee>\n";break;case"navigation":l+="<nav>"+(i=meno.parseText(o.value))+"</nav>\n";break;case"comment":l+="\x3c!--"+o.value+"--\x3e\n";break;case"code":l+="<code "+meno.addInlines()+">"+o.value+"</code>\n";break;case"image":l+="<img "+meno.addInlines()+"alt='"+o.alt+"' src='"+o.url+"' />\n";break;case"link":l+="<a "+meno.addInlines()+"href='"+o.url+"' target='_blank'>"+meno.parseLink(o.value)+"</a>\n";break;case"container":l+="\n<"+o.tag,o.classname&&(l+=" class='"+o.classname+"'"),o.id&&(l+=" id='"+o.id+"'"),l+=" >\n";break;case"closecontainer":l+="</"+o.tag+">\n";break;case"return":l+="\n <br /> \n";break;case"line":l+="\n <hr /> \n";break;case"colorline":l+="\n<div style='height:2px;margin:1em 0;background-color:"+o.value+"'></div>\n";break;case"attr":""==o.name?(meno.attr={},meno.style={}):-1!=meno.styleList.indexOf(o.name)?meno.style[o.name]=o.value:-1!=meno.attrList.indexOf(o.name)&&(meno.attr[o.name]=o.value);break;default:l=l}}return l},parse:function(e){var n;return n=meno.parseRaw(e),meno.produceHTML(n)},css:".meno{font-family:Calibri}.meno code{display:block;background-color:#f5f5f5;color:#696969;font-family:consolas}.meno textarea{resize:none}.meno h1,h2,h3,h4,h5,h6{margin-bottom:-10px}.meno a{color:#87ceeb;text-decoration:none;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3}.meno article{font-family:Consolas}.meno nav{margin:5px;display:inline-block;padding:0 5px;border-right:2px solid #d3d3d3;border-left:2px solid #d3d3d3;background-color:#fafafa}.meno nav a{border:none}.meno blockquote{font-style:italic;margin-left:1em}.meno ol,.meno ul{margin-left:20px;display:inline-block}.meno blockquote:before{content:''' '}.meno blockquote:after{content:' '''}.meno ul{padding:5px;border-top:2px solid #d3d3d3;border-bottom:2px solid #d3d3d3}.meno ul ul{border:none;padding:2px}.meno ul li{font-size:1.25em;font-weight:700;list-style-type:none}.meno ul li:before{content:'| '}.meno ul ul li{font-size:1.15em;font-weight:700;color:#696969}.meno ul ul li:before{content:': ';color:#000}.meno ul ul ul li{font-size:1.1em;font-weight:400;color:grey}.meno ul ul ul li:before{content:'· ';color:#000}.meno ul ul ul ul li{font-size:1em;font-weight:400;color:#000}.meno ul ul ul ul li:before{content:'- ';color:#000}.meno ol{padding:5px;border-top:2px solid #d3d3d3;border-bottom:2px solid #d3d3d3}.meno ol ol{border:none;padding:2px}.meno ol li{font-size:1.25em;font-weight:700}.meno ol ol li{font-size:1.15em;font-weight:700;color:#696969}.meno ol ol ol li{font-size:1.1em;font-weight:400;color:grey}.meno ol ol ol ol li{font-size:1em;font-weight:400;color:#000}.meno [meno-inblock]{display:inline-block}.meno [meno-underline]{text-decoration:underline}.meno [meno-tip]{position:relative;display:inline;border-bottom:1px dotted pink}.meno [meno-tip] [meno-tipbox]{font-size:13px;visibility:hidden;min-width:100px;background-color:rgba(50,50,50,.8);color:#fff;border-radius:10px 0;padding:3px 8px;position:absolute;z-index:1;bottom:100%;left:50%;opacity:0;transition:opacity .3s}.meno [meno-tip] [meno-tipbox]:before{content:'';position:absolute;bottom:0;left:0;border-width:5px;border-style:solid;border-color:transparent transparent pink pink}.meno [meno-tip]:hover [meno-tipbox]{visibility:visible;opacity:1}.meno [meno-tip]:hover{background-color:rgba(250,200,200,.1);cursor:help}.meno ::selection{background-color:orange;color:#fff}",addCSS:function(){var e=document.createElement("style");e.innerHTML=meno.css;var n=document.getElementsByTagName("style"),o=document.getElementsByTagName("link");n.length>0?document.head.insertBefore(e,n[0]):o.length>0?document.head.insertBefore(e,o[0]):document.head.appendChild(e)},convert:function(){for(var e=document.querySelectorAll("script[type='text/meno']"),n=0;n<e.length;n++){var o=e[n].innerHTML,t=document.createElement("article");t.className="meno",e[n].parentNode.insertBefore(t,e[n]),t.innerHTML=meno.parsed(o),e[n].parentNode.removeChild(e[n])}}};